<p-card class="w-full max-w-full">
    <p-table [value]="userStore.users()">
        <ng-template #header>
            <tr>
                <th id="username">{{'person.username'|translate}}</th>
                <th id="firstname">{{'person.firstname'|translate}}</th>
                <th id="lastname">{{'person.lastname'|translate}}</th>
                <th id="roles">Rolle(n)</th>
                <th id="actions"></th>
            </tr>
        </ng-template>
        <ng-template #body let-user>
            <tr>
                <td>{{ user.username }}</td>
                <td>{{ user.firstname }}</td>
                <td>{{ user.lastname }}</td>
                <td>
                    @for(role of user.roles; track role.id) {
                    <app-role [role]="role.name" />
                    }
                </td>
                <td>
                    <div class="w-full flex justify-end">
                        <p-button (onClick)="op.toggle($event)" [text]="true" icon="pi pi-ellipsis-v" />
                        <p-popover #op>
                            <div class="flex flex-col">
                                <p-button [text]="true" icon="pi pi-pencil" [label]="'action.edit'|translate"
                                    (onClick)="userStore.editUser(user)" />
                                <p-button [text]="true" icon="pi pi-trash" [label]="'action.delete'|translate"
                                    (onClick)="userStore.deleteUser($event,user.id)" />
                            </div>
                        </p-popover>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
    <div class="flex w-full justify-end mt-2">
        <p-button icon="pi pi-plus" (onClick)="userStore.createUser()"
            [label]="'utils.create.value'|translate:{value:'label.user'|translate} " />
    </div>
</p-card>