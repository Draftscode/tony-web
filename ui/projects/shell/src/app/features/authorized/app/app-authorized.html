@if(true) {
<div class="flex w-full relative h-full overflow-hidden">
    <div class="grow w-full h-full flex flex-col overflow-hidden main-content bg-surface-100 dark:bg-surface-950!"
        [class.is-shifted]="_isSidebarOpen()">
        <app-menu class="flex w-full h-full" #menu [items]="menuItems()">
            <ng-template #start let-isExpanded>
                <p-button (onClick)="settingsStore.toggle()" [text]="true" [rounded]="true" size="small"
                    styleClass="p-0">
                    <p-avatar [label]="accountStore.abbrev()" shape="circle" size="large" />
                </p-button>
                @if(isExpanded) {
                <div class="flex items-center space-x-1 gap-2 flex-col">
                    <img [src]="'./images/logo-raw-no-text'+(_themeService.isDark()?'-dark':'')+'.png'"
                        [style.height]="'28px'" alt="Logo">

                    @let brokers = accountStore.me.value()?.brokers ?? [];
                    @if(brokers.length) {
                    <span class="text dark:text-gray-300">
                        Hallo <span class="font-bold"> {{brokers[0].name}} </span>
                    </span>
                    }
                </div>
                }
            </ng-template>

            <ng-template #content>
                <p-drawer (visibleChange)="settingsStore.toggle($event)" [visible]="settingsStore.isVisible()"
                    [header]="'settings.menu.label'|translate" position="right">
                    <app-settings />
                </p-drawer>

                <div class="flex flex-col w-full h-full min-h-0 overflow-auto">
                    <!-- navbar -->
                    <div class="w-full flex items-center justify-between">
                        <p-menubar class="w-full" class="w-full bg-transparent! border-none! rounded-none"
                            [model]="_menuItems()">
                            <ng-template #start>
                                <div class="flex items-center space-x-1 gap-2">
                                    @if(menuState() === 'minimal' && isSmall()) {
                                    <p-button icon="pi pi-bars" [text]="true" tooltipPosition="bottom" pTooltip="Menu"
                                        (onClick)="menu.toggleMenuState()" />
                                    }
                                </div>
                            </ng-template>
                            <ng-template #end>
                                <div class="flex items-center space-x-1">
                                    <p-button [rounded]="true" icon="pi pi-cog" [text]="true" size="large"
                                        tooltipPosition="bottom" [pTooltip]="'settings.menu.open'|translate"
                                        (onClick)="settingsStore.toggle()" />
                                </div>
                            </ng-template>
                        </p-menubar>
                    </div>
                    <div class="flex w-full h-full flex-col overflow-auto min-h-0">
                        <router-outlet />
                    </div>
                </div>
            </ng-template>
        </app-menu>
    </div>
</div>

<p-toast />
}